(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{126:function(e,t,a){e.exports=a(156)},131:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(20),o=a.n(r),l=a(27),i=(a(131),a(15)),c=a(16),u=a(11),m=a(17),d=a(18),h=a(23),p=a(196),f=a(66),g=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(p.a,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",fixed:"top"},s.a.createElement(p.a.Brand,{href:"/"},"Epiphany!"),s.a.createElement(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),s.a.createElement(p.a.Collapse,{id:"responsive-navbar-nav"},s.a.createElement(f.a,{className:"mr-auto"},"true"!=localStorage.getItem("loggedIn")&&s.a.createElement(f.a.Link,{href:"/login"},"Login"),"true"!=localStorage.getItem("loggedIn")&&s.a.createElement(f.a.Link,{href:"/signup"},"Signup")),s.a.createElement(f.a,null,"true"===localStorage.getItem("loggedIn")&&s.a.createElement(f.a.Link,{href:"/profile"},"Profile"),"true"===localStorage.getItem("loggedIn")&&s.a.createElement(f.a.Link,{href:"/post"},"Post"),"true"===localStorage.getItem("loggedIn")&&s.a.createElement(f.a.Link,{onClick:this.props.callback},"Logout"))))}}]),a}(n.Component),b=a(35),v=a(10),E=a.n(v),y=a(21),w=a(22),k=a.n(w),C=a(8),j=a(25),O=(n.Component,a(45)),S=a(30),L=a(24),x=a(51),I=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={post:null,text:"",deleted:!1},n.submit=n.submit.bind(Object(u.a)(n)),n.updateComment=n.updateComment.bind(Object(u.a)(n)),n.deletePost=n.deletePost.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,e.next=3,k.a.get("https://epiphany-test-three.herokuapp.com/posts/".concat(t.postId));case 3:a=e.sent.data,this.setState({post:a.json_post});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateComment",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"submit",value:function(){var e=Object(y.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props.match.params,n={text:this.state.text,user_email:localStorage.getItem("userEmail"),post_id:a.postId},console.log(n),k.a.post("https://epiphany-test-three.herokuapp.com/posts/".concat(a.postId,"/comment"),n).then((function(e){console.log(e)}),(function(e){console.log("Looks like there was a problem: \n",e)})),t.preventDefault();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletePost",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params,a={text:this.state.text,user_email:localStorage.getItem("userEmail"),post_id:t.postId},console.log(a),k.a.post("https://epiphany-test-three.herokuapp.com/".concat(t.postId,"/delete"),a).then((function(e){console.log(e),n.setState({deleted:!0})}),(function(e){console.log("Looks like there was a problem: \n",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.deleted)return s.a.createElement(h.a,{to:"/"});var t=this.state.post;if(null===t)return s.a.createElement("p",null,"Loading ...");var a=t.body;return console.log(t.tags),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"jumbotron col-12"},s.a.createElement("h1",{className:"display-3"},t.title),s.a.createElement(S.a,null,t.tags&&t.tags.map((function(e){return s.a.createElement(L.a,{style:{paddingLeft:2,paddingRight:2},md:"auto"},s.a.createElement("h4",null,s.a.createElement(O.a,{variant:"info"},e.name)))}))),s.a.createElement("hr",{className:"my-4"}),s.a.createElement("p",{className:"lead"},a.split("\n").map((function(e,t){return s.a.createElement("div",{key:t},e)}))),"true"===localStorage.getItem("loggedIn")&&localStorage.getItem("userEmail")===t.user_email&&s.a.createElement(l.b,{to:"".concat(t.id,"/update")},s.a.createElement(j.a,{variant:"outline-success"},"Update")),"true"===localStorage.getItem("loggedIn")&&localStorage.getItem("userEmail")===t.user_email&&s.a.createElement(j.a,{variant:"outline-danger",onClick:function(){e.deletePost()}},"Delete"),s.a.createElement("hr",{className:"my-4"}),s.a.createElement(C.a,{onSubmit:this.submit},s.a.createElement(C.a.Group,{controlId:"text"},s.a.createElement(C.a.Control,{as:"textarea",name:"text",placeholder:"Any comments?",text:this.state.text,onChange:this.updateComment})),s.a.createElement(j.a,{variant:"success",type:"submit"},"Comment")),s.a.createElement("hr",{className:"my-4"}),t.comments.map((function(e){return 1===e.comment_level?s.a.createElement(x.a,{className:"mt-1"},s.a.createElement(x.a.Body,null,s.a.createElement("h5",null,e.commentor),s.a.createElement("p",null,e.text.split("\n").map((function(e,t){return s.a.createElement("div",{key:t},e)}))))):2===e.comment_level?s.a.createElement(x.a,{className:"ml-3"},s.a.createElement(x.a.Body,null,s.a.createElement("h5",null,e.commentor),s.a.createElement("p",null,e.text.split("\n").map((function(e,t){return s.a.createElement("div",{key:t},e)}))))):s.a.createElement(x.a,{className:"ml-5"},s.a.createElement(x.a.Body,null,s.a.createElement("h5",null,e.commentor),s.a.createElement("p",null,e.text.split("\n").map((function(e,t){return s.a.createElement("div",{key:t},e)})))))})))))}}]),a}(n.Component),N=a(53),P=a(54),T=a(76),M=a(194),_=a(195),G=a(58),D=a(110),K=a(33),B=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).colors=["#ffbaba","#ffddab","#fdffcf","#bdffb3","#b8fff9","#ffd1ea","#edc4ff"],n.state={posts:null,filteredPosts:null,tags:null,tagsList:null,key:0},n.filterPosts=n.filterPosts.bind(Object(u.a)(n)),n.filterTags=n.filterTags.bind(Object(u.a)(n)),n.deleteTag=n.deleteTag.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a,n,s,r,o,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://epiphany-test-three.herokuapp.com/main");case 2:for(r in t=e.sent.data,a=t.data[0],n=t.data[1],s=[],a)s.push(a[r]);for(l in o=[],n)o.push(n[l]);this.setState({posts:s,filteredPosts:s,tagsList:o});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterPosts",value:function(e){this.setState({filteredPosts:this.state.posts.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())||t.body.toLowerCase().includes(e.target.value.toLowerCase())}))})}},{key:"deleteTag",value:function(e){var t=[],a=(t=null===this.state.tags?[]:this.state.tags).indexOf(e.target.id);t.splice(a,1),this.setState({tags:t,filteredPosts:this.state.posts.filter((function(e){var a=0;return t.forEach((function(t){e.tags.forEach((function(e){e.name.toLowerCase().includes(t.toLowerCase())&&(a+=1)}))})),a===t.length}))})}},{key:"filterTags",value:function(e){if(13===e.keyCode)if(null!==this.state.tags&&this.state.tags.some((function(t){return t.toLowerCase()===e.target.value.toLowerCase()})))this.setState({errorMessage:"Tag has already been added."});else if(this.state.tagsList.some((function(t){return t.name.toLowerCase()===e.target.value.toLowerCase()}))){this.setState({errorMessage:""});var t=[];t=null===this.state.tags?[]:this.state.tags;var a=this.state.tagsList.map((function(e){return e.name.toLowerCase()}));-1!==a.indexOf(e.target.value.toLowerCase())?t.push(this.state.tagsList[a.indexOf(e.target.value.toLowerCase())].name):t.push(e.target.value),this.setState({tags:t,filteredPosts:this.state.posts.filter((function(e){var a=0;return t.forEach((function(t){e.tags.forEach((function(e){e.name.toLowerCase().includes(t.toLowerCase())&&(a+=1)}))})),a===t.length}))})}else this.setState({errorMessage:"Tag does not exist."})}},{key:"getColor",value:function(){0===this.colors.length&&(this.colors=["#ffbaba","#ffddab","#fdffcf","#bdffb3","#b8fff9","#ffd1ea","#edc4ff"]);var e=this.colors.length,t=Math.floor(Math.random()*e),a=this.colors[t];return this.colors.splice(t,1),a}},{key:"render",value:function(){var e=this,t=this.state.tagsList,a=0;function n(){return a+=1}return s.a.createElement(D.a,{className:"justify-content-md-center"},s.a.createElement("div",{className:"row"},s.a.createElement(L.a,null,s.a.createElement(C.a,null,s.a.createElement(C.a.Group,{controlId:"formSearch"},s.a.createElement(C.a.Control,{onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},label:"freeSolo",type:"text",placeholder:"Search posts!",onChange:this.filterPosts}),s.a.createElement(C.a.Text,{className:"text-muted"},"Here, you can search with text that matches the title or body of the posts."))))),s.a.createElement(S.a,{className:"justify-content-md-center"},this.state.errorMessage&&s.a.createElement(K.a,{variant:"danger"}," ",this.state.errorMessage," ")),s.a.createElement("div",{className:"row"},s.a.createElement(S.a,{style:{paddingLeft:25}},this.state.tags&&this.state.tags.map((function(t){return s.a.createElement(T.a,{style:{paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:5},"aria-label":"Basic example"},s.a.createElement(j.a,{onClick:e.deleteTag,id:t,variant:"secondary"},"x"),s.a.createElement(j.a,{variant:"secondary"},t))})))),s.a.createElement("div",{className:"row"},this.state.tagsList&&s.a.createElement("div",{style:{width:1125,paddingLeft:15}},s.a.createElement(_.a,{id:"free-solo-demo",freeSolo:!0,options:t.map((function(e){return e.name})),renderInput:function(t){return s.a.createElement(M.a,Object.assign({},t,{onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},id:"standard-full-width",label:"Search with tags!",margin:"normal",variant:"outlined",onKeyUp:e.filterTags}))}}))),null===this.state.posts&&s.a.createElement("div",null," ",s.a.createElement(P.a,{animation:"border",variant:"primary"})," ",s.a.createElement("p",null,"Loading posts...")),this.state.filteredPosts&&this.state.filteredPosts.map((function(t){return s.a.createElement(S.a,{className:"justify-content-md-center"},s.a.createElement(G.a,{key:t.id,style:{backgroundColor:e.getColor(),marginTop:10,marginBottom:10,alignItems:"center",width:"50rem"}},s.a.createElement(l.b,{key:n(),to:"/post/".concat(t.id)},s.a.createElement(G.a.Body,null,s.a.createElement(G.a.Title,{style:{color:"#161717",textAlign:"center"}},t.title),s.a.createElement(S.a,{className:"justify-content-md-center"},t.tags&&t.tags.map((function(e){return s.a.createElement(L.a,{key:n(),style:{paddingLeft:2,paddingRight:2,alignItems:"center"},md:"auto"},s.a.createElement(O.a,{variant:"info"},e.name))}))),s.a.createElement(G.a.Text,{style:{color:"#161717",textAlign:"center"}},s.a.createElement(N.a,{lines:2},t.body)))),s.a.createElement(l.b,{key:n(),to:"/users/".concat(t.user_id)},s.a.createElement(G.a.Footer,{className:"text-muted",style:{color:"#161717",textAlign:"center"}},"Posted by ",t.user," at ",t.time))))})))}}]),a}(n.Component),R=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",loggedIn:!1,errorMessage:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(y.a)(E.a.mark((function e(t){var a,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===this.state.email||""===this.state.password?this.setState({errorMessage:"Please fill in all fields."}):(a={email:this.state.email,password:this.state.password},k.a.post("https://epiphany-test-three.herokuapp.com/login",a).then((function(e){console.log(e),200===e.status?(localStorage.setItem("userName",e.data.user_info[0].name),localStorage.setItem("userEmail",n.state.email),localStorage.setItem("userPoints",e.data.user_info[0].points),localStorage.setItem("loggedIn",!0),n.setState({loggedIn:!0}),n.props.callback()):206===e.status?n.setState({errorMessage:"Please confirm your email before login."}):n.setState({errorMessage:"Invalid email or password. Please check your login details and try again."})}),(function(e){console.log("Looks like there was a problem: \n",e)}))),t.preventDefault();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loggedIn?s.a.createElement(h.a,{to:"/"}):s.a.createElement(L.a,{md:{span:"4",offset:"4"}},this.state.errorMessage&&s.a.createElement(K.a,{variant:"danger"}," ",this.state.errorMessage," "),s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(C.a.Group,{controlId:"formGroupEmail"},s.a.createElement(C.a.Label,null,"Email address"),s.a.createElement(C.a.Control,{type:"email",name:"email",placeholder:"Enter email",email:this.state.email,onChange:this.handleChange})),s.a.createElement(C.a.Group,{controlId:"formGroupPassword"},s.a.createElement(C.a.Label,null,"Password"),s.a.createElement(C.a.Control,{type:"password",name:"password",placeholder:"Password",password:this.state.password,onChange:this.handleChange})),s.a.createElement(j.a,{variant:"success",type:"submit"},"Submit")))}}]),a}(n.Component),A=a(83),U=a(40),F=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).colors=["#ffbaba","#ffddab","#fdffcf","#bdffb3","#b8fff9","#ffd1ea","#edc4ff"],n.state={posts:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={email:localStorage.getItem("userEmail")},console.log(t),k.a.post("https://epiphany-test-three.herokuapp.com/profile",t).then((function(e){console.log(e.data.posts);var t=e.data.posts,n=[];for(var s in t)n.push(t[s]);a.setState({posts:n})}),(function(e){console.log("Looks like there was a problem: \n",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getColor",value:function(){0===this.colors.length&&(this.colors=["#ffbaba","#ffddab","#fdffcf","#bdffb3","#b8fff9","#ffd1ea","#edc4ff"]);var e=this.colors.length,t=Math.floor(Math.random()*e),a=this.colors[t];return this.colors.splice(t,1),a}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement(A.a,{defaultActiveKey:"profile",id:"uncontrolled-tab-example"},s.a.createElement(U.a,{eventKey:"profile",title:"Profile"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"jumbotron col-12"},s.a.createElement("h1",{className:"display-3"},localStorage.getItem("userName")),s.a.createElement("h2",{className:"display-3"},"Points: ",localStorage.getItem("userPoints"))))),s.a.createElement(U.a,{eventKey:"posts",title:"Posts"},s.a.createElement("div",{className:"row"},this.state.posts&&this.state.posts.map((function(t){return s.a.createElement("div",{key:t.id,className:"col-sm-12 col-md-4 col-lg-3"},s.a.createElement(l.b,{to:"/post/".concat(t.id)},s.a.createElement("div",{className:"card mb-3",style:{backgroundColor:e.getColor(),color:"#161717",height:"250px"}},s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},t.title),s.a.createElement(S.a,null,t.tags&&t.tags.map((function(e){return s.a.createElement(L.a,{style:{paddingLeft:2,paddingRight:2},md:"auto"},s.a.createElement(O.a,{variant:"info"},e.name))}))),s.a.createElement("p",{className:"card-text",style:{maxLength:"100"}},s.a.createElement(N.a,{lines:2},t.body))))))})))),s.a.createElement(U.a,{eventKey:"followers",title:"Followers"},"hello again"),s.a.createElement(U.a,{eventKey:"following",title:"Following"},"hello again2")))}}]),a}(n.Component),J=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={title:"",body:"",posted:!1,tagsList:null,tags:null,newTags:null,errorMessage:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.addTag=n.addTag.bind(Object(u.a)(n)),n.deleteTag=n.deleteTag.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a,n,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://epiphany-test-three.herokuapp.com/main");case 2:for(s in t=e.sent.data,console.log(t.data[0]),a=t.data[1],n=[],a)n.push(a[s]);this.setState({tagsList:n}),console.log(this.state.tagsList);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"deleteTag",value:function(e){console.log(e.target.id);var t=[],a=(t=null===this.state.tags?[]:this.state.tags).indexOf(e.target.id);console.log(a),t.splice(a,1),console.log(t),this.setState({tags:t});var n=[];-1!==(n=null===this.state.newTags?[]:this.state.newTags).indexOf(e.target.id)&&(n.splice(a,1),this.setState({newTags:n})),console.log(n)}},{key:"addTag",value:function(e){if(this.setState({errorMessage:""}),13===e.keyCode){if(null!==this.state.tags&&this.state.tags.some((function(t){return t.toLowerCase()===e.target.value.toLowerCase()})))this.setState({errorMessage:"Tag has already been added."});else{var t=[];t=null===this.state.tags?[]:this.state.tags;var a=this.state.tagsList.map((function(e){return e.name.toLowerCase()}));-1!==a.indexOf(e.target.value.toLowerCase())?t.push(this.state.tagsList[a.indexOf(e.target.value.toLowerCase())].name):t.push(e.target.value),this.setState({tags:t})}if(console.log(this.state.tags),this.state.tagsList.some((function(t){return t.name.toLowerCase()===e.target.value.toLowerCase()})));else{var n=[];(n=null===this.state.newTags?[]:this.state.newTags).push(e.target.value),this.setState({newTags:n})}}}},{key:"handleSubmit",value:function(){var e=Object(y.a)(E.a.mark((function e(t){var a,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={title:this.state.title,body:this.state.body,user:localStorage.getItem("userEmail"),tags:this.state.tags,newTags:this.state.newTags},console.log(a),""===this.state.title||""===this.state.body||null===this.state.tags?this.setState({errorMessage:"Please fill in all fields."}):k.a.post("http://localhost:5000/create",a).then((function(e){console.log(e),n.setState({posted:!0})}),(function(e){console.log("Looks like there was a problem: \n",e)})),t.preventDefault();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.tagsList;return this.state.posted?s.a.createElement(h.a,{to:"/"}):s.a.createElement(L.a,{style:{paddingLeft:200,paddingRight:200}},null===this.state.tagsList&&s.a.createElement("div",null," ",s.a.createElement(P.a,{animation:"border",variant:"primary"})," ",s.a.createElement("p",null,"Loading...")),this.state.errorMessage&&s.a.createElement(K.a,{variant:"danger"}," ",this.state.errorMessage," "),this.state.tagsList&&s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(C.a.Group,{controlId:"formGroupTitle"},s.a.createElement(C.a.Label,null,"Title"),s.a.createElement(C.a.Control,{onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},type:"text",name:"title",placeholder:"Enter title",title:this.state.title,onChange:this.handleChange})),s.a.createElement("div",{className:"row"},s.a.createElement(S.a,{style:{paddingLeft:25}},this.state.tags&&this.state.tags.map((function(t){return s.a.createElement(T.a,{style:{paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:5},"aria-label":"Basic example"},s.a.createElement(j.a,{onClick:e.deleteTag,id:t,variant:"secondary"},"x"),s.a.createElement(j.a,{variant:"secondary"},t))})))),s.a.createElement("div",{className:"row"},this.state.tagsList&&s.a.createElement("div",{style:{width:1125,paddingLeft:15}},s.a.createElement(_.a,{id:"free-solo-demo",freeSolo:!0,options:t.map((function(e){return e.name})),renderInput:function(t){return s.a.createElement(M.a,Object.assign({},t,{onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},id:"standard-full-width",label:"Add tags!",margin:"normal",variant:"outlined",onKeyUp:e.addTag}))}}))),s.a.createElement(C.a.Group,{controlId:"formGroupPassword"},s.a.createElement(C.a.Label,null,"Body"),s.a.createElement(C.a.Control,{onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},as:"textarea",rows:"15",name:"body",placeholder:"Body",body:this.state.body,onChange:this.handleChange})),s.a.createElement(j.a,{variant:"success",type:"submit"},"Submit")))}}]),a}(n.Component),W=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={title:"",body:"",updated:!1},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,e.next=3,k.a.get("https://epiphany-test-three.herokuapp.com/posts/".concat(t.postId,"/update"));case 3:a=e.sent.data,console.log(a.json_post.body),this.setState({title:a.json_post.body,body:a.json_post.body});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(y.a)(E.a.mark((function e(t){var a,n,s=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props.match.params,n={title:this.state.title,body:this.state.body,user:localStorage.getItem("userEmail")},k.a.post("https://epiphany-test-three.herokuapp.com/posts/".concat(a.postId,"/update"),n).then((function(e){console.log(e),s.setState({updated:!0})}),(function(e){console.log("Looks like there was a problem: \n",e)})),t.preventDefault();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.updated,t=this.props.match.params;return e?s.a.createElement(h.a,{to:"/post/".concat(t.postId)}):s.a.createElement(L.a,{style:{paddingLeft:200,paddingRight:200}},s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(C.a.Group,{controlId:"formGroupTitle"},s.a.createElement(C.a.Label,null,"Title"),s.a.createElement(C.a.Control,{type:"text",name:"title",value:this.state.title,onChange:this.handleChange})),s.a.createElement(C.a.Group,{controlId:"formGroupPassword"},s.a.createElement(C.a.Label,null,"Body"),s.a.createElement(C.a.Control,{as:"textarea",rows:"15",name:"body",value:this.state.body,onChange:this.handleChange})),s.a.createElement(j.a,{variant:"success",type:"submit"},"Submit")))}}]),a}(n.Component),H=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password:"",errorMessage:"",signedUp:!1},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(y.a)(E.a.mark((function e(t){var a,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===this.state.username||""===this.state.email||""===this.state.password?this.setState({errorMessage:"Please fill in all fields."}):(a={name:this.state.username,email:this.state.email,password:this.state.password},console.log(a),k.a.post("https://epiphany-test-three.herokuapp.com/signup",a).then((function(e){console.log(e),200===e.status?n.setState({signedUp:!0}):206===e.status&&n.setState({errorMessage:"This email has already been registered. Please confirm your email through the confirmation link sent via email."})}),(function(e){console.log("Looks like there was a problem: \n",e)}))),t.preventDefault();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.signedUp?s.a.createElement(h.a,{to:"/email_sent"}):s.a.createElement(L.a,{md:{span:"4",offset:"4"}},this.state.errorMessage&&s.a.createElement(K.a,{variant:"danger"}," ",this.state.errorMessage," "),s.a.createElement(C.a,{onSubmit:this.handleSubmit},s.a.createElement(C.a.Group,{controlId:"formGroupUsername"},s.a.createElement(C.a.Label,null,"Name"),s.a.createElement(C.a.Control,{type:"text",name:"username",placeholder:"Enter name",username:this.state.username,onChange:this.handleChange})),s.a.createElement(C.a.Group,{controlId:"formGroupEmail"},s.a.createElement(C.a.Label,null,"Email address"),s.a.createElement(C.a.Control,{type:"email",name:"email",placeholder:"Enter email",email:this.state.email,onChange:this.handleChange})),s.a.createElement(C.a.Group,{controlId:"formGroupPassword"},s.a.createElement(C.a.Label,null,"Password"),s.a.createElement(C.a.Control,{type:"password",name:"password",placeholder:"Password",password:this.state.password,onChange:this.handleChange})),s.a.createElement(j.a,{variant:"success",type:"submit"},"Signup")))}}]),a}(n.Component),$=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(K.a,{variant:"info",style:{marginLeft:20,marginRight:20}},"Signup successful! Please check your email for the email confirmation link and click on it before login.")}}]),a}(n.Component),q=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(K.a,{variant:"success",style:{marginLeft:20,marginRight:20}},"Email Confirmed! Please login to access your account.")}}]),a}(n.Component),z=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).colors=["#ffbaba","#ffddab","#fdffcf","#bdffb3","#b8fff9","#ffd1ea","#edc4ff"],n.state={userName:"",userPoints:0,posts:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(E.a.mark((function e(){var t,a,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params,a={id:t.userId},console.log(a),k.a.post("https://epiphany-test-three.herokuapp.com/users/".concat(t.userId),a).then((function(e){console.log(e.data.user_info[0]);var t=e.data.user_info[2].posts,a=[];for(var s in t)a.push(t[s]);n.setState({posts:a,userName:e.data.user_info[0].name,userPoints:e.data.user_info[1].points})}),(function(e){console.log("Looks like there was a problem: \n",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getColor",value:function(){0===this.colors.length&&(this.colors=["#ffbaba","#ffddab","#fdffcf","#bdffb3","#b8fff9","#ffd1ea","#edc4ff"]);var e=this.colors.length,t=Math.floor(Math.random()*e),a=this.colors[t];return this.colors.splice(t,1),a}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},!this.state.userName&&s.a.createElement("div",null," ",s.a.createElement(P.a,{animation:"border",variant:"primary"})," ",s.a.createElement("p",null,"Loading Profile...")),this.state.userName&&s.a.createElement(A.a,{defaultActiveKey:"profile",id:"uncontrolled-tab-example"},s.a.createElement(U.a,{eventKey:"profile",title:"Profile"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"jumbotron col-12"},s.a.createElement("h1",{className:"display-3"},this.state.userName),s.a.createElement("h2",{className:"display-3"},"Points: ",this.state.userPoints)))),s.a.createElement(U.a,{eventKey:"posts",title:"Posts"},s.a.createElement("div",{className:"row"},this.state.posts&&this.state.posts.map((function(t){return s.a.createElement("div",{key:t.id,className:"col-sm-12 col-md-4 col-lg-3"},s.a.createElement(l.b,{to:"/post/".concat(t.id)},s.a.createElement("div",{className:"card mb-3",style:{backgroundColor:e.getColor(),color:"#161717",height:"250px"}},s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},t.title),s.a.createElement(S.a,null,t.tags&&t.tags.map((function(e){return s.a.createElement(L.a,{style:{paddingLeft:2,paddingRight:2},md:"auto"},s.a.createElement(O.a,{variant:"info"},e.name))}))),s.a.createElement("p",{className:"card-text",style:{maxLength:"100"}},s.a.createElement(N.a,{lines:2},t.body))))))})))),s.a.createElement(U.a,{eventKey:"followers",title:"Followers"},"hello again"),s.a.createElement(U.a,{eventKey:"following",title:"Following"},"hello again2")))}}]),a}(n.Component),Q=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(u.a)(n)),n.login=n.login.bind(Object(u.a)(n)),n.state={login:!1},n}return Object(c.a)(a,[{key:"login",value:function(){this.setState({login:!0})}},{key:"logout",value:function(){localStorage.clear(),this.setState({login:!1})}},{key:"render",value:function(){var e=this,t=localStorage.getItem("loggedIn");return console.log(t),s.a.createElement("div",null,s.a.createElement(g,{callback:this.logout}),s.a.createElement(h.b,{exact:!0,path:"/",component:B}),s.a.createElement(h.b,{exact:!0,path:"/post/:postId",component:I}),s.a.createElement(h.b,{exact:!0,path:"/users/:userId",component:z}),s.a.createElement(h.b,{exact:!0,path:"/signup",component:H}),s.a.createElement(h.b,{exact:!0,path:"/email_sent",component:$}),s.a.createElement(h.b,{exact:!0,path:"/email_confirmed",component:q}),"true"!=localStorage.getItem("loggedIn")&&s.a.createElement(h.b,{exact:!0,path:"/login",component:function(){return s.a.createElement(R,{callback:e.login})}}),s.a.createElement(h.b,{exact:!0,path:"/profile",component:F}),s.a.createElement(h.b,{exact:!0,path:"/post",component:J}),s.a.createElement(h.b,{exact:!0,path:"/post/:postId/update",component:W}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(l.a,null,s.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[126,1,2]]]);