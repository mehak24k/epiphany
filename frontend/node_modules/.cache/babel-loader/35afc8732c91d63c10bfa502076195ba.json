{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import Truncate from'react-truncate';import Badge from'react-bootstrap/Badge';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Spinner from'react-bootstrap/Spinner';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import ButtonGroup from'react-bootstrap/ButtonGroup';import{TextField}from'@material-ui/core/';import{Autocomplete}from'@material-ui/lab/';import Card from'react-bootstrap/Card';import CardDeck from'react-bootstrap/CardDeck';import Container from'react-bootstrap/Container';import Alert from'react-bootstrap/Alert';var Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);var _super=_createSuper(Posts);function Posts(props){var _this;_classCallCheck(this,Posts);_this=_super.call(this,props);_this.colors=[\"#ffbaba\",\"#ffddab\",\"#fdffcf\",\"#bdffb3\",\"#b8fff9\",\"#ffd1ea\",\"#edc4ff\"];_this.state={posts:null,filteredPosts:null,tags:null,tagsList:null,key:0};_this.filterPosts=_this.filterPosts.bind(_assertThisInitialized(_this));_this.filterTags=_this.filterTags.bind(_assertThisInitialized(_this));_this.deleteTag=_this.deleteTag.bind(_assertThisInitialized(_this));return _this;}_createClass(Posts,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,posts,tags,arr,i,tagArr,j;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://epiphany-test-three.herokuapp.com/main');case 2:data=_context.sent.data;posts=data.data[0];tags=data.data[1];arr=[];for(i in posts){arr.push(posts[i]);}tagArr=[];for(j in tags){tagArr.push(tags[j]);}this.setState({posts:arr,filteredPosts:arr,tagsList:tagArr});case 10:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"filterPosts\",value:function filterPosts(event){this.setState({filteredPosts:this.state.posts.filter(function(post){return post.title.toLowerCase().includes(event.target.value.toLowerCase())||post.body.toLowerCase().includes(event.target.value.toLowerCase());})});}},{key:\"deleteTag\",value:function deleteTag(event){var arr=[];if(this.state.tags===null){arr=[];}else{arr=this.state.tags;}var index=arr.indexOf(event.target.id);arr.splice(index,1);this.setState({tags:arr,filteredPosts:this.state.posts.filter(function(post){var check=false;var count=0;arr.forEach(function(myTag){post.tags.forEach(function(tag){if(tag.name.toLowerCase().includes(myTag.toLowerCase())){count=count+1;}});});if(count===arr.length){check=true;}else{check=false;}return check;})});}},{key:\"filterTags\",value:function filterTags(event){if(event.keyCode===13){if(this.state.tags!==null&&this.state.tags.some(function(tag){return tag.toLowerCase()===event.target.value.toLowerCase();})){this.setState({errorMessage:\"Tag has already been added.\"});}else if(!this.state.tagsList.some(function(tag){return tag.name.toLowerCase()===event.target.value.toLowerCase();})){this.setState({errorMessage:\"Tag does not exist.\"});}else{this.setState({errorMessage:''});var arr=[];if(this.state.tags===null){arr=[];}else{arr=this.state.tags;}var tempArr=this.state.tagsList.map(function(value){return value.name.toLowerCase();});if(tempArr.indexOf(event.target.value.toLowerCase())!==-1){arr.push(this.state.tagsList[tempArr.indexOf(event.target.value.toLowerCase())].name);}else{arr.push(event.target.value);}this.setState({tags:arr,filteredPosts:this.state.posts.filter(function(post){var check=false;var count=0;arr.forEach(function(myTag){post.tags.forEach(function(tag){if(tag.name.toLowerCase().includes(myTag.toLowerCase())){count=count+1;}});});if(count===arr.length){check=true;}else{check=false;}return check;})});}}}},{key:\"getColor\",value:function getColor(){if(this.colors.length===0){this.colors=[\"#ffbaba\",\"#ffddab\",\"#fdffcf\",\"#bdffb3\",\"#b8fff9\",\"#ffd1ea\",\"#edc4ff\"];}var len=this.colors.length;var randomNum=Math.floor(Math.random()*len);var color=this.colors[randomNum];this.colors.splice(randomNum,1);return color;}},{key:\"render\",value:function render(){var _this2=this;var top100Films=this.state.tagsList;var first=0;function myKey(){first=first+1;return first;}return/*#__PURE__*/React.createElement(Container,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formSearch\"},/*#__PURE__*/React.createElement(Form.Control,{onKeyPress:function onKeyPress(e){e.key==='Enter'&&e.preventDefault();},label:\"freeSolo\",type:\"text\",placeholder:\"Search posts!\",onChange:this.filterPosts}),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted\"},\"Here, you can search with text that matches the title or body of the posts.\"))))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},this.state.errorMessage&&/*#__PURE__*/React.createElement(Alert,{variant:\"danger\"},\" \",this.state.errorMessage,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(Row,{style:{paddingLeft:25}},this.state.tags&&this.state.tags.map(function(tag){return/*#__PURE__*/React.createElement(ButtonGroup,{style:{paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:5},\"aria-label\":\"Basic example\"},/*#__PURE__*/React.createElement(Button,{onClick:_this2.deleteTag,id:tag,variant:\"secondary\"},\"x\"),/*#__PURE__*/React.createElement(Button,{variant:\"secondary\"},tag));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.tagsList&&/*#__PURE__*/React.createElement(\"div\",{style:{width:1125,paddingLeft:15}},/*#__PURE__*/React.createElement(Autocomplete,{id:\"free-solo-demo\",freeSolo:true,options:top100Films.map(function(option){return option.name;}),renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{onKeyPress:function onKeyPress(e){e.key==='Enter'&&e.preventDefault();},id:\"standard-full-width\",label:\"Search with tags!\",margin:\"normal\",variant:\"outlined\",onKeyUp:_this2.filterTags}));}}))),this.state.posts===null&&/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",variant:\"primary\"}),\" \",/*#__PURE__*/React.createElement(\"p\",null,\"Loading posts...\")),this.state.filteredPosts&&this.state.filteredPosts.map(function(post){return/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Card,{key:post.id,style:{backgroundColor:_this2.getColor(),marginTop:10,marginBottom:10,alignItems:\"center\",width:'50rem'}},/*#__PURE__*/React.createElement(Link,{key:myKey(),to:\"/post/\".concat(post.id)},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,{style:{color:\"#161717\",textAlign:\"center\"}},post.title),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},post.tags&&post.tags.map(function(tag){return/*#__PURE__*/React.createElement(Col,{key:myKey(),style:{paddingLeft:2,paddingRight:2,alignItems:\"center\"},md:\"auto\"},/*#__PURE__*/React.createElement(Badge,{variant:\"info\"},tag.name));})),/*#__PURE__*/React.createElement(Card.Text,{style:{color:\"#161717\",textAlign:\"center\"}},/*#__PURE__*/React.createElement(Truncate,{lines:2},post.body)))),/*#__PURE__*/React.createElement(Link,{key:myKey(),to:\"/users/\".concat(post.user_id)},/*#__PURE__*/React.createElement(Card.Footer,{className:\"text-muted\",style:{color:\"#161717\",textAlign:\"center\"}},\"Posted by \",post.user,\" at \",post.time))));}));}}]);return Posts;}(Component);export default Posts;","map":null,"metadata":{},"sourceType":"module"}