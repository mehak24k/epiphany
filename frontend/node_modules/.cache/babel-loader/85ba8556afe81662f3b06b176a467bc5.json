{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yx/epiphany/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import Truncate from'react-truncate';import Badge from'react-bootstrap/Badge';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Spinner from'react-bootstrap/Spinner';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import ButtonGroup from'react-bootstrap/ButtonGroup';import{TextField}from'@material-ui/core/';import{Autocomplete}from'@material-ui/lab/';var Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);var _super=_createSuper(Posts);function Posts(props){var _this;_classCallCheck(this,Posts);_this=_super.call(this,props);_this.colors=[\"#ffbaba\",\"#ffddab\",\"#fdffcf\",\"#bdffb3\",\"#b8fff9\",\"#ffd1ea\",\"#edc4ff\"];_this.state={posts:null,filteredPosts:null,tags:null,tagsList:null};_this.filterPosts=_this.filterPosts.bind(_assertThisInitialized(_this));_this.filterTags=_this.filterTags.bind(_assertThisInitialized(_this));_this.deleteTag=_this.deleteTag.bind(_assertThisInitialized(_this));return _this;}_createClass(Posts,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,posts,tags,arr,i,tagArr,j;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:5000/');case 2:data=_context.sent.data;console.log(data.data[0]);posts=data.data[0];tags=data.data[1];console.log(posts);arr=[];for(i in posts){arr.push(posts[i]);}console.log(arr);tagArr=[];for(j in tags){tagArr.push(tags[j]);}this.setState({posts:arr,filteredPosts:arr,tagsList:tagArr});console.log(this.state.posts);console.log(this.state.filteredPosts);console.log(this.state.tagsList);case 16:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"filterPosts\",value:function filterPosts(event){this.setState({filteredPosts:this.state.posts.filter(function(post){return post.title.toLowerCase().includes(event.target.value.toLowerCase())||post.body.toLowerCase().includes(event.target.value.toLowerCase());})});}},{key:\"deleteTag\",value:function deleteTag(event){console.log(event.target.id);var arr=[];if(this.state.tags===null){arr=[];}else{arr=this.state.tags;}var index=arr.indexOf(event.target.id);console.log(index);arr.splice(index,1);this.setState({tags:arr,filteredPosts:this.state.posts.filter(function(post){var check=false;var count=0;arr.forEach(function(myTag){post.tags.forEach(function(tag){if(tag.name.toLowerCase().includes(myTag.toLowerCase())){count=count+1;}});});if(count===arr.length){check=true;}else{check=false;}return check;})});console.log(arr);}},{key:\"filterTags\",value:function filterTags(event){if(event.keyCode===39){var arr=[];if(this.state.tags===null){arr=[];}else{arr=this.state.tags;}arr.push(event.target.value);this.setState({tags:arr,filteredPosts:this.state.posts.filter(function(post){var check=false;var count=0;arr.forEach(function(myTag){post.tags.forEach(function(tag){if(tag.name.toLowerCase().includes(myTag.toLowerCase())){count=count+1;}});});if(count===arr.length){check=true;}else{check=false;}return check;})});}console.log(this.state.tags);}},{key:\"getColor\",value:function getColor(){if(this.colors.length===0){this.colors=[\"#ffbaba\",\"#ffddab\",\"#fdffcf\",\"#bdffb3\",\"#b8fff9\",\"#ffd1ea\",\"#edc4ff\"];}var len=this.colors.length;var randomNum=Math.floor(Math.random()*len);var color=this.colors[randomNum];this.colors.splice(randomNum,1);return color;}},{key:\"render\",value:function render(){var _this2=this;var top100Films=this.state.tagsList;return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formSearch\"},/*#__PURE__*/React.createElement(Form.Control,{label:\"freeSolo\",type:\"text\",placeholder:\"Search posts!\",onChange:this.filterPosts}),/*#__PURE__*/React.createElement(Form.Text,{className:\"text-muted\"},\"Here, you can search with text that matches the title or body of the posts.\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(Row,{style:{paddingLeft:25}},this.state.tags&&this.state.tags.map(function(tag){return/*#__PURE__*/React.createElement(ButtonGroup,{style:{paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:5},\"aria-label\":\"Basic example\"},/*#__PURE__*/React.createElement(Button,{onClick:_this2.deleteTag,id:tag,variant:\"secondary\"},\"x\"),/*#__PURE__*/React.createElement(Button,{variant:\"secondary\"},tag));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.tagsList&&/*#__PURE__*/React.createElement(\"div\",{style:{width:1125,paddingLeft:15}},/*#__PURE__*/React.createElement(Autocomplete,{id:\"free-solo-demo\",freeSolo:true,options:top100Films.map(function(option){return option.name;}),renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{id:\"standard-full-width\",label:\"Search with tags!\",margin:\"normal\",variant:\"outlined\",onKeyUp:_this2.filterTags}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.posts===null&&/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",variant:\"primary\"}),\" \",/*#__PURE__*/React.createElement(\"p\",null,\"Loading posts...\")),this.state.filteredPosts&&this.state.filteredPosts.map(function(post){return/*#__PURE__*/React.createElement(\"div\",{key:post.id,className:\"col-sm-12 col-md-4 col-lg-3\"},/*#__PURE__*/React.createElement(Link,{to:\"/post/\".concat(post.id)},/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-3\",style:{backgroundColor:_this2.getColor(),color:\"#161717\",height:'250px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title\"},post.title),/*#__PURE__*/React.createElement(Row,null,post.tags&&post.tags.map(function(tag){return/*#__PURE__*/React.createElement(Col,{style:{paddingLeft:2,paddingRight:2},md:\"auto\"},/*#__PURE__*/React.createElement(Badge,{variant:\"info\"},tag.name));})),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\",style:{maxLength:\"100\"}},/*#__PURE__*/React.createElement(Truncate,{lines:2},post.body))))));})));}}]);return Posts;}(Component);export default Posts;","map":{"version":3,"sources":["/Users/yx/epiphany/frontend/src/Posts/Posts.js"],"names":["React","Component","Link","axios","Truncate","Badge","Row","Col","Spinner","Form","Button","ButtonGroup","TextField","Autocomplete","Posts","props","colors","state","posts","filteredPosts","tags","tagsList","filterPosts","bind","filterTags","deleteTag","get","data","console","log","arr","i","push","tagArr","j","setState","event","filter","post","title","toLowerCase","includes","target","value","body","id","index","indexOf","splice","check","count","forEach","myTag","tag","name","length","keyCode","len","randomNum","Math","floor","random","color","top100Films","paddingLeft","map","paddingRight","paddingTop","paddingBottom","width","option","params","backgroundColor","getColor","height","maxLength"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Link} from 'react-router-dom';\nimport axios from 'axios';\nimport Truncate from 'react-truncate';\nimport Badge from 'react-bootstrap/Badge'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Spinner from 'react-bootstrap/Spinner'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport {TextField} from '@material-ui/core/';\nimport {Autocomplete} from '@material-ui/lab/';\n\nclass Posts extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      posts: null,\n      filteredPosts: null,\n      tags: null,\n      tagsList: null,\n    };\n    this.filterPosts = this.filterPosts.bind(this);\n    this.filterTags = this.filterTags.bind(this);\n    this.deleteTag = this.deleteTag.bind(this);\n  }\n\n  async componentDidMount() {\n      const data = (await axios.get('http://localhost:5000/')).data;\n      console.log(data.data[0]);\n      const posts = data.data[0];\n      const tags = data.data[1];\n      console.log(posts);\n      let arr = [];\n      for (var i in posts) {\n        arr.push(posts[i])\n      }\n      console.log(arr);\n      let tagArr = [];\n      for (var j in tags) {\n        tagArr.push(tags[j])\n      }\n      this.setState({\n        posts: arr,\n        filteredPosts: arr,\n        tagsList: tagArr,\n      });\n      console.log(this.state.posts);\n      console.log(this.state.filteredPosts);\n      console.log(this.state.tagsList);\n  }\n\n  filterPosts(event) {\n    this.setState({\n      filteredPosts: this.state.posts.filter(post => {\n        return post.title.toLowerCase().includes(event.target.value.toLowerCase())\n        || post.body.toLowerCase().includes(event.target.value.toLowerCase())\n      })\n    });\n  }\n\n  deleteTag(event) {\n    console.log(event.target.id)\n    let arr = [];\n    if (this.state.tags === null){\n      arr = [];\n    } else {\n      arr = this.state.tags;\n    }\n\n    const index = arr.indexOf(event.target.id)\n    console.log(index);\n    arr.splice(index, 1)\n    this.setState({\n      tags: arr,\n      filteredPosts: this.state.posts.filter(post => {\n        var check = false;\n        let count = 0;\n        arr.forEach(myTag => {\n          post.tags.forEach(tag => {\n            if (tag.name.toLowerCase().includes(myTag.toLowerCase())) {\n              count = count + 1;\n            }\n          })\n        });\n        if (count === arr.length) {\n          check = true;\n        } else {\n          check = false;\n        }\n        return check;\n      }),\n    })\n    console.log(arr);\n\n  }\n\n  filterTags(event) {\n    if (event.keyCode === 39) {\n      let arr = [];\n      if (this.state.tags === null){\n        arr = [];\n      } else {\n        arr = this.state.tags;\n      }\n      arr.push(event.target.value)\n      this.setState({\n        tags: arr,\n        filteredPosts: this.state.posts.filter(post => {\n          var check = false;\n          let count = 0;\n          arr.forEach(myTag => {\n            post.tags.forEach(tag => {\n              if (tag.name.toLowerCase().includes(myTag.toLowerCase())) {\n                count = count + 1;\n              }\n            })\n          });\n          if (count === arr.length) {\n            check = true;\n          } else {\n            check = false;\n          }\n          return check;\n        }),\n\n      });\n    }\n    console.log(this.state.tags);\n  }\n\n  colors = [\"#ffbaba\",\"#ffddab\",\"#fdffcf\",\"#bdffb3\",\"#b8fff9\",\"#ffd1ea\",\"#edc4ff\"];\n  getColor(){\n    if (this.colors.length === 0) {\n      this.colors = [\"#ffbaba\",\"#ffddab\",\"#fdffcf\",\"#bdffb3\",\"#b8fff9\",\"#ffd1ea\",\"#edc4ff\"];\n    }\n    var len = this.colors.length;\n    var randomNum = Math.floor(Math.random()*len);\n    var color = this.colors[randomNum];\n    this.colors.splice(randomNum, 1);\n    return color;\n  }\n\n  render() {\n    const top100Films = this.state.tagsList;\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n        <Col>\n          <Form>\n            <Form.Group controlId=\"formSearch\">\n            <Form.Control label=\"freeSolo\" type=\"text\" placeholder=\"Search posts!\" onChange={this.filterPosts}/>\n              <Form.Text className=\"text-muted\">\n                Here, you can search with text that matches the title or body of the posts.\n              </Form.Text>\n            </Form.Group>\n          </Form>\n          </Col>\n        </div>\n        <div className=\"row\">\n          <Row style={{paddingLeft: 25}}>\n          {this.state.tags && this.state.tags.map(tag => (\n            <ButtonGroup style={{ paddingLeft: 2, paddingRight: 2, paddingTop: 2, paddingBottom: 5}} aria-label=\"Basic example\">\n              <Button onClick={this.deleteTag} id={tag} variant=\"secondary\">x</Button>\n              <Button variant=\"secondary\">{tag}</Button>\n            </ButtonGroup>\n            ))\n        }\n          </Row>\n        </div>\n        <div className=\"row\">\n        {this.state.tagsList && <div style={{ width: 1125, paddingLeft: 15 }}>\n        <Autocomplete\n          id=\"free-solo-demo\"\n          freeSolo\n          options={top100Films.map((option) => option.name)}\n          renderInput={(params) => (\n            <TextField {...params}  id=\"standard-full-width\" label=\"Search with tags!\" margin=\"normal\" variant=\"outlined\" onKeyUp={this.filterTags}/>\n          )}\n        />\n        </div>\n      }\n        </div>\n        <div className=\"row\">\n          {this.state.posts === null && <div> <Spinner animation=\"border\" variant=\"primary\" /> <p>Loading posts...</p></div>}\n          {this.state.filteredPosts && this.state.filteredPosts.map(post => (\n              <div key={post.id} className=\"col-sm-12 col-md-4 col-lg-3\">\n                <Link to={`/post/${post.id}`}>\n                  <div className=\"card mb-3\" style={{backgroundColor: this.getColor(), color: \"#161717\", height: '250px'}}>\n                  <div className=\"card-body\">\n                    <h4 className=\"card-title\">{post.title}</h4>\n                    <Row>\n                    {post.tags && post.tags.map(tag => (\n                      <Col style={{ paddingLeft: 2, paddingRight: 2 }} md=\"auto\">\n                        <Badge variant=\"info\">{tag.name}</Badge>\n                      </Col>\n                      ))\n                    }\n                    </Row>\n                    <p className=\"card-text\" style={{maxLength: \"100\"}}>\n                    <Truncate lines={2}>\n                        {post.body}\n                    </Truncate>\n                    </p>\n                  </div>\n                  </div>\n                </Link>\n              </div>\n            ))\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}