{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/Mehak/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Col from'react-bootstrap/Col';import{Redirect}from\"react-router-dom\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={email:'',password:'',loggedIn:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var token=localStorage.getItem('loggedIn');console.log(token);}},{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this2=this;var loginData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:loginData={\"email\":this.state.email,\"password\":this.state.password};axios.post('http://localhost:5000/login',loginData).then(function(response){//console.log(response.data.user_info[0].name);\nlocalStorage.setItem('userName',response.data.user_info[0].name);localStorage.setItem('userEmail',_this2.state.email);localStorage.setItem('userPoints',response.data.user_info[0].points);localStorage.setItem('loggedIn',true);_this2.setState({loggedIn:true});_this2.props.callback();},function(error){console.log('Looks like there was a problem: \\n',error);});event.preventDefault();case 3:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){var redirectTo=this.state.loggedIn;if(redirectTo){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(Col,{md:{span:\"4\",offset:\"4\"}},/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGroupEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Enter email\",email:this.state.email,onChange:this.handleChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGroupPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",name:\"password\",placeholder:\"Password\",password:this.state.password,onChange:this.handleChange})),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Submit\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/Mehak/Desktop/frontend/src/Login/Login.js"],"names":["React","Component","axios","Form","Button","Col","Redirect","Login","props","state","email","password","loggedIn","handleChange","bind","handleSubmit","token","localStorage","getItem","console","log","event","setState","target","name","value","loginData","post","then","response","setItem","data","user_info","points","callback","error","preventDefault","redirectTo","span","offset"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Col from 'react-bootstrap/Col'\nimport { Redirect } from \"react-router-dom\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password:'',\n      loggedIn: false,\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('loggedIn');\n    console.log(token);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    let loginData = {\"email\": this.state.email, \"password\": this.state.password}\n    axios.post('http://localhost:5000/login', loginData)\n    .then((response) => {\n      //console.log(response.data.user_info[0].name);\n      localStorage.setItem('userName', response.data.user_info[0].name);\n      localStorage.setItem('userEmail', this.state.email);\n      localStorage.setItem('userPoints', response.data.user_info[0].points);\n      localStorage.setItem('loggedIn', true);\n      this.setState({loggedIn: true});\n      this.props.callback();\n    }, (error) => {\n      console.log('Looks like there was a problem: \\n', error);\n    });\n\n      event.preventDefault();\n  }\n\n  render() {\n    const redirectTo = this.state.loggedIn;\n    if (redirectTo) {\n        return (\n          <Redirect to=\"/\" />\n        );\n    }\n    return (\n      <Col md={{ span: \"4\", offset: \"4\" }}>\n        <Form onSubmit={this.handleSubmit}>\n          <Form.Group controlId=\"formGroupEmail\">\n              <Form.Label>Email address</Form.Label>\n              <Form.Control type=\"email\" name=\"email\" placeholder=\"Enter email\" email={this.state.email} onChange={this.handleChange} />\n          </Form.Group>\n            <Form.Group controlId=\"formGroupPassword\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control type=\"password\" name=\"password\" placeholder=\"Password\" password={this.state.password} onChange={this.handleChange}/>\n          </Form.Group>\n          <Button variant=\"success\" type=\"submit\">Submit</Button>\n        </Form>\n\n      </Col>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}