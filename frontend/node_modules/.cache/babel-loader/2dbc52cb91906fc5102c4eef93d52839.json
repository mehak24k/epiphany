{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,useState,render}from'react';import axios from'axios';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Col from'react-bootstrap/Col';import{Redirect}from\"react-router-dom\";import Alert from'react-bootstrap/Alert';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={email:'',password:'',loggedIn:false,errorMessage:''};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this2=this;var loginData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.email===''||this.state.password===''){this.setState({errorMessage:\"Please fill in all fields.\"});}else{loginData={\"email\":this.state.email,\"password\":this.state.password};axios.post('https://epiphany-test-three.herokuapp.com/login',loginData).then(function(response){console.log(response);if(response.status===200){localStorage.setItem('userName',response.data.user_info[0].name);localStorage.setItem('userEmail',_this2.state.email);localStorage.setItem('userPoints',response.data.user_info[0].points);localStorage.setItem('loggedIn',true);_this2.setState({loggedIn:true});_this2.props.callback();}else{if(response.status===206){_this2.setState({errorMessage:\"Please confirm your email before login.\"});}else{_this2.setState({errorMessage:\"Invalid email or password. Please check your login details and try again.\"});}}},function(error){console.log('Looks like there was a problem: \\n',error);});}event.preventDefault();case 2:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){var redirectTo=this.state.loggedIn;if(redirectTo){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(Col,{md:{span:\"4\",offset:\"4\"}},this.state.errorMessage&&/*#__PURE__*/React.createElement(Alert,{variant:\"danger\"},\" \",this.state.errorMessage,\" \"),/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGroupEmail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Enter email\",email:this.state.email,onChange:this.handleChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formGroupPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",name:\"password\",placeholder:\"Password\",password:this.state.password,onChange:this.handleChange})),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Submit\")));}}]);return Login;}(Component);export default Login;","map":null,"metadata":{},"sourceType":"module"}