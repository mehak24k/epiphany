{"ast":null,"code":"import _defineProperty from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/Mehak/Desktop/epiphany/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import{Link}from'react-router-dom';import axios from'axios';import Comment from'./Comment';import Badge from'react-bootstrap/Badge';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Button from'react-bootstrap/Button';import Media from'react-bootstrap/Media';import Form from'react-bootstrap/Form';var Post=/*#__PURE__*/function(_Component){_inherits(Post,_Component);var _super=_createSuper(Post);function Post(props){var _this;_classCallCheck(this,Post);_this=_super.call(this,props);_this.state={post:null,text:'',deleted:false};_this.submit=_this.submit.bind(_assertThisInitialized(_this));_this.updateComment=_this.updateComment.bind(_assertThisInitialized(_this));_this.deletePost=_this.deletePost.bind(_assertThisInitialized(_this));return _this;}_createClass(Post,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params,post;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=this.props.match.params;_context.next=3;return axios.get(\"https://epiphany-test-three.herokuapp.com/posts/\".concat(params.postId));case 3:post=_context.sent.data;this.setState({post:post.json_post});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"updateComment\",value:function updateComment(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"submit\",value:function(){var _submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var params,postData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params=this.props.match.params;postData={\"text\":this.state.text,\"user_email\":localStorage.getItem('userEmail'),\"post_id\":params.postId};console.log(postData);axios.post(\"https://epiphany-test-three.herokuapp.com/posts/\".concat(params.postId,\"/comment\"),postData).then(function(response){console.log(response);},function(error){console.log('Looks like there was a problem: \\n',error);});event.preventDefault();case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function submit(_x){return _submit.apply(this,arguments);}return submit;}()},{key:\"deletePost\",value:function(){var _deletePost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var params,postData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:params=this.props.match.params;postData={\"text\":this.state.text,\"user_email\":localStorage.getItem('userEmail'),\"post_id\":params.postId};console.log(postData);axios.post(\"https://epiphany-test-three.herokuapp.com/\".concat(params.postId,\"/delete\"),postData).then(function(response){console.log(response);_this2.setState({deleted:true});},function(error){console.log('Looks like there was a problem: \\n',error);});case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function deletePost(){return _deletePost.apply(this,arguments);}return deletePost;}()},{key:\"render\",value:function render(){var _this3=this;var deleted=this.state.deleted;if(deleted){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}var post=this.state.post;if(post===null)return/*#__PURE__*/React.createElement(\"p\",null,\"Loading ...\");var text=post.body;console.log(post.tags);return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron col-12\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"display-3\"},post.title),/*#__PURE__*/React.createElement(Row,null,post.tags&&post.tags.map(function(tag){return/*#__PURE__*/React.createElement(Col,{style:{paddingLeft:2,paddingRight:2},md:\"auto\"},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(Badge,{variant:\"info\"},tag.name)));})),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-4\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"lead\"},text.split(\"\\n\").map(function(i,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},i);})),localStorage.getItem('loggedIn')===\"true\"&&localStorage.getItem('userEmail')===post.user_email&&/*#__PURE__*/React.createElement(Link,{to:\"\".concat(post.id,\"/update\")},/*#__PURE__*/React.createElement(Button,{variant:\"outline-success\"},\"Update\")),localStorage.getItem('loggedIn')===\"true\"&&localStorage.getItem('userEmail')===post.user_email&&/*#__PURE__*/React.createElement(Button,{variant:\"outline-danger\",onClick:function onClick(){_this3.deletePost();}},\"Delete\"),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-4\"}),/*#__PURE__*/React.createElement(Form,{onSubmit:this.submit},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"text\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",name:\"text\",placeholder:\"Any comments?\",text:this.state.text,onChange:this.updateComment})),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Comment\")),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-4\"}),post.comments.map(function(comment){return comment.comment_level===1?/*#__PURE__*/React.createElement(Media,{className:\"mt-1\"},/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"h5\",null,comment.commentor),/*#__PURE__*/React.createElement(\"p\",null,comment.text.split(\"\\n\").map(function(i,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},i);})))):comment.comment_level===2?/*#__PURE__*/React.createElement(Media,{className:\"ml-3\"},/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"h5\",null,comment.commentor),/*#__PURE__*/React.createElement(\"p\",null,comment.text.split(\"\\n\").map(function(i,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},i);})))):/*#__PURE__*/React.createElement(Media,{className:\"ml-5\"},/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"h5\",null,comment.commentor),/*#__PURE__*/React.createElement(\"p\",null,comment.text.split(\"\\n\").map(function(i,key){return/*#__PURE__*/React.createElement(\"div\",{key:key},i);}))));}))));}}]);return Post;}(Component);export default Post;","map":null,"metadata":{},"sourceType":"module"}